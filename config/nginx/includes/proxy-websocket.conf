# /etc/nginx/includes/proxy-websocket.conf
# WebSocket-optimized proxy settings
# Use this for Home Assistant, real-time dashboards

# Include base proxy settings
include /etc/nginx/includes/proxy-base.conf;

# WebSocket-specific optimizations
proxy_read_timeout 3600s;
proxy_send_timeout 3600s;

# Disable buffering for WebSocket traffic
proxy_buffering off;
proxy_request_buffering off;

# WebSocket-specific headers
proxy_set_header Sec-WebSocket-Extensions $http_sec_websocket_extensions;
proxy_set_header Sec-WebSocket-Key $http_sec_websocket_key;
proxy_set_header Sec-WebSocket-Version $http_sec_websocket_version;

# Keep connection alive
proxy_set_header Connection "upgrade";
proxy_cache_bypass $http_upgrade;